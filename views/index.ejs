<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="/styles/index.css">
        <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
        <title>FAQ</title>
    </head>
    <body>
        <div class="mainHead">Ближайшие курсы</div>
        <img class="signin" src="/imgs/signin.png">
        <% if(superAdmin){%>
            <a href="/admin"><img class="admin" src="/imgs/admin.png"></a>
        <%}%>
        <form class="signinBl">
            <img src="/imgs/cross.png" alt="Закрыть окно" class="signinBlCross">
            <% if(!admin){%>
            <input class="signinBlInp" name='login' id="login" type="text" placeholder="Логин">
            <input class="signinBlInp" name='password' id="password" type="password" placeholder="Пароль">
            <input class="signinBlSend" type="submit" value="Войти">
            <div class="signinBlErr"></div>
            <%}else{%>
            <div class="signout">Выйти</div>
            <%} %>
            <% if(superAdmin){%>
                <div class="signinChangePassword">Изменить пароль</div>
            <%} %>
        </form>
        <form class="changePassword">
            <img src="/imgs/cross.png" alt="Закрыть окно" class="signinBlCross">
            <input class='changePasswordInp' type="password" placeholder="Введите новый пароль">
            <input class='changePasswordInp' type="password" placeholder="Подтвердите пароль">
            <input class='changePasswordSend' type="submit" value="Изменить пароль">
        </form>
        <div class="cont">
            <% for(let i=0; i<curses.length;i++) {%>
                <div class="curse">
                    <div class="curseId"><%=curses[i]._id %></div>
                    <div class="curseText"><%=curses[i].text %></div>
                    <div class="curseDate"><%=curses[i].date %></div>
                    <% if(admin){%>
                    <div class="curseActions">
                        <img class="curseDelete" src="/imgs/delete.png" alt="удалить">
                        <img class='curseChange' src="/imgs/pencil.png" alt="изменить">
                    </div>
                    <div class="curseLoading justify-content-center">
                        <div class="spinner-border" role="status"></div>
                    </div>
                    <div class="curseNewElems">
                        <div class="newCurseChange">
                            <div class="newCurseText" s="s" contenteditable="true"><%=curses[i].text %></div>
                            <div class="d-flex" n="s">
                                <div class="newCurseSaveChanges d-flex justify-content-center">
                                    <span class="newCurseSaveSp">Сохранить</span>
                                    <div style='transform: scale(0.7); display: none'><div class="spinner-border" role="status"></div></div>
                                </div>
                                <input class="newCurseDate" type='date' value=<%=curses[i].date.replace('.', '-').replace('.', '-') %> >
                            </div>
                            <div style='height: 0px'><img class='newCurseClose' src="/imgs/cross.png"></div>
                        </div>
                        <div class='newCurseSymbols'>Напечатано символов: <span class='newCurseSymbolsSp'></span>/180</div>
                    </div>
                    <%}%>
                </div>
            <%} %>
            <% if(admin){
                for(let i = 0; i < 3 - curses.length % 3; i++){%>
                    <div class="newCurse">
                        <div class="newCurseChange">
                            <div class="newCurseText" contenteditable="true"></div>
                            <div class="d-flex">
                                <div class="newCurseSave d-flex justify-content-center">
                                    <span class="newCurseSaveSp">Сохранить</span>
                                    <div style='transform: scale(0.7); display: none'><div class="spinner-border" role="status"></div></div>
                                </div>
                                <input class="newCurseDate" type='date'>
                            </div>
                        </div>
                        <img src="/imgs/plus.png" alt="plus" class="cursePlus">
                        <div class='newCurseSymbols'>Напечатано символов: <span class='newCurseSymbolsSp'>0</span>/180</div>
                    </div>
                <%}
            }%>
        </div>
    </body>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="/scripts/admin.js"></script>
    <script src="/scripts/curses.js"></script>
    <script src="/scripts/qa.js"></script>
</html>